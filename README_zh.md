<h1 align="center">Always Attend</h1>
<p align="center">
  <img src="https://img.shields.io/badge/python-3.11%2B-blue.svg">
  <img src="https://img.shields.io/badge/License-GPLv3-blue.svg">
  <img src="https://img.shields.io/github/last-commit/bunizao/always-attend">
  <img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg">
  <img src="https://img.shields.io/badge/platform-macOS%20%7C%20Linux%20%7C%20Windows-lightgrey">
  <p align="center">  
  <img src="https://img.shields.io/badge/status-Public%20Beta-orange?style=for-the-badge">
<p align="center">
  ä¸€ä¸ªå¸®åŠ©ä½ è§£æ”¾åŒæ‰‹ï¼Œè‡ªåŠ¨åŒ–æäº¤æ¯å‘¨è€ƒå‹¤ä»£ç çš„å·¥å…·ï¼Œå½“å‰ä¸º Public Betaã€‚<br>
  âš ï¸ <b>è¯·åˆç†åˆè§„ä½¿ç”¨ï¼Œå¹¶éµå®ˆå­¦æ ¡ä¸ç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾ã€‚</b>
</p>

<p align="center">
  <a href="README.md"><b>English README</b></a>
</p>

> [!WARNING]  
> æœ¬é¡¹ç›®å½“å‰å¤„äº **Public Beta**ã€‚åŠŸèƒ½å¯èƒ½å˜æ›´ä¸”å¯èƒ½å­˜åœ¨ç¼ºé™·ã€‚     
> æäº¤åé¦ˆï¼š [![Open Issue](https://img.shields.io/badge/Open-Issue-blue)](https://github.com/bunizao/always-attend/issues/new)   

#### æ­¤æ–‡æ¡£ç”± [**ChatGPT 5**](https://chatgpt.com) ç¿»è¯‘ï¼ŒåŸå§‹å†…å®¹ç”¨è‹±è¯­ç¼–å†™ï¼Œä»…ä¾›å‚è€ƒã€‚ 

## ğŸš€ ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

åŒå‡»å³å¯è¿è¡Œï¼ŒåŒ…å«é¦–æ¬¡å¼•å¯¼è®¾ç½®ï¼š

- macOSï¼šåŒå‡» `Always-Attend.command`
- Windowsï¼šåŒå‡» `Always-Attend.bat`ï¼ˆæˆ–è¿è¡Œ `Always-Attend.ps1`ï¼‰

å¯åŠ¨å™¨ä¼šåšä»€ä¹ˆï¼š
- æ£€æŸ¥ç³»ç»Ÿä¸­çš„ Pythonï¼ˆä»¥åŠå¯é€‰çš„ Gitï¼‰
- é¦–æ¬¡è¿è¡Œåˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
- è¿è¡Œé¦–æ¬¡è®¾ç½®å‘å¯¼ï¼ˆé—¨æˆ· URLã€è´¦å·ã€å‘¨æ¬¡ã€æµè§ˆå™¨ï¼‰
- ä» `data/*/*.json` è‡ªåŠ¨æ£€æµ‹æœ€æ–°å‘¨å¹¶è®¾ç½® `WEEK_NUMBER`
  - è‹¥å¸Œæœ›æ¯æ¬¡è¿è¡Œéƒ½æç¤ºå‘¨æ¬¡ï¼Œè®¾ç½® `WEEK_PROMPT=1`
- ç®€åŒ–æ‰§è¡Œï¼šç›´æ¥è°ƒç”¨ `python main.py`ï¼Œæ— å¤æ‚èœå•

é¦–æ¬¡è®¾ç½®åŠŸèƒ½ï¼š
- ASCII è‰ºæœ¯æ¨ªå¹…
- é¦–æ¬¡è¿è¡Œæ˜¾ç¤ºéšç§æ”¿ç­–å¹¶å¾å¾—åŒæ„
- å­¦æ ¡å¿«é€Ÿé…ç½®ï¼ˆåŒ…å« Monash Malaysia é€‰é¡¹ï¼‰
- é‚®ç®±ä¸å¯†ç è¾“å…¥
- å‘¨æ¬¡é…ç½®

æ³¨æ„ï¼š
- Git å¯é€‰ï¼›æœªå®‰è£…å°†è·³è¿‡æ›´æ–°æ­¥éª¤
- éœ€è¦å·²å®‰è£… Chrome/Edgeï¼ˆé»˜è®¤ä½¿ç”¨ç³»ç»Ÿæµè§ˆå™¨ï¼‰

å¿«é€Ÿå¼€å§‹ï¼š
```bash
# macOSï¼šåŒå‡» Always-Attend.command
# Windowsï¼šåŒå‡» Always-Attend.bat

# æˆ–ç›´æ¥è¿è¡Œ
python main.py
```
æ›´å¤šè¿è¡Œç»†èŠ‚ä¸å¯é€‰å‚æ•°è§ä¸‹æ–¹â€œå¿«é€Ÿå¼€å§‹ï¼ˆQuick Startï¼‰â€ç« èŠ‚ã€‚

## å‰ç½®æ¡ä»¶

- Python 3.11 æˆ–æ›´é«˜ç‰ˆæœ¬
- å·²å®‰è£… Google Chrome æˆ– Microsoft Edge æµè§ˆå™¨

## å®‰è£…

0) å®‰è£… Git
- ä» https://git-scm.com/downloads ä¸‹è½½å¹¶å®‰è£…

1) å…‹éš†å¹¶è¿›å…¥é¡¹ç›®
```bash
git clone https://github.com/bunizao/always-attend.git
cd always-attend
```

2) åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
- macOS / Linuxï¼š
```bash
python -m venv .venv
source .venv/bin/activate
```
- Windowsï¼ˆPowerShellï¼‰ï¼š
```powershell
python -m venv .venv
.venv\Scripts\Activate.ps1
```
è‹¥æç¤ºâ€œå·²ç¦æ­¢è¿è¡Œè„šæœ¬â€ï¼Œå¯æ‰§è¡Œï¼š
```powershell
Set-ExecutionPolicy -Scope CurrentUser RemoteSigned
```
ç„¶åå†æ¬¡è¿è¡Œ `.venv\Scripts\Activate.ps1`ã€‚è‹¥ PowerShell ä»æŠ¥é”™ï¼Œå¯å³é”®ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell åé‡è¯• `Activate.ps1`ã€‚

3) å®‰è£…ä¾èµ–
```bash
pip install -U pip
pip install -r requirements.txt
```

4) è®¾ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
```
ä½¿ç”¨ä»»æ„ç¼–è¾‘å™¨ä¿®æ”¹ `.env`ï¼Œå¿«é€Ÿç¤ºä¾‹ï¼ˆVS Codeï¼‰ï¼š
```bash
code .env
```

é‡è¦æç¤ºï¼š
- Monash University Malaysia ç”¨æˆ·ï¼šå°† `PORTAL_URL` è®¾ç½®ä¸º `https://attendance.monash.edu.my`
- è¯·åŠ¡å¿…åŒ…å« `https://` å‰ç¼€
> [!IMPORTANT]
> æœ¬é¡¹ç›®**æœªè·è’™çº³å£«å¤§å­¦èµ„åŠ©ã€é™„å±æˆ–è®¤å¯**ã€‚
> 
> è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹é¡¹ç›®ï¼Œä¸è’™çº³å£«å¤§å­¦æ²¡æœ‰ä»»ä½•å®˜æ–¹è”ç³»ã€‚  

ä¹Ÿå¯ç›´æ¥åœ¨ç»ˆç«¯ä¸­æ›´æ–° `PORTAL_URL`ï¼š
```bash
# macOS
sed -i '' 's/^PORTAL_URL=.*/PORTAL_URL="https:\/\/your.portal.url"/' .env
# Linux
sed -i 's/^PORTAL_URL=.*/PORTAL_URL="https:\/\/your.portal.url"/' .env
```

5) å¿«é€Ÿå¼€å§‹ï¼ˆQuick Startï¼‰
```bash
python main.py
```
è¿è¡Œåä¼šå‘ç”Ÿä»€ä¹ˆï¼š
- ä» `.env` å’Œå½“å‰ç¯å¢ƒè¯»å–é…ç½®ï¼ˆéœ€è¦å·²è®¾ç½® `PORTAL_URL`ï¼Œå¹¶é€šè¿‡ `CODES_URL`/`CODES_FILE`/`CODES` æä¾›è€ƒå‹¤ä»£ç æ¥æºï¼‰ã€‚
- è‹¥æœªæ‰¾åˆ°æœ‰æ•ˆä¼šè¯ï¼Œå°†è‡ªåŠ¨å¼¹å‡ºæµè§ˆå™¨è¿›è¡Œå•ç‚¹ç™»å½• (SSO)ï¼Œå¹¶æ˜¾ç¤º MFA éªŒè¯é¡µé¢ï¼›å®ŒæˆéªŒè¯åä¼šå°†ä¼šè¯ä¿å­˜åˆ° `storage_state.json`ã€‚
- è„šæœ¬ä¼šè¿›å…¥è€ƒå‹¤é—¨æˆ·ï¼Œæ‰«ææœ¬å‘¨æ¡ç›®å¹¶æäº¤ä»£ç ã€‚
- è¯·åœ¨ç»ˆç«¯æŸ¥çœ‹æ—¥å¿—ç»“æœï¼›è‹¥ç¼ºå°‘ä»£ç ï¼ˆå¸¸è§æƒ…å†µï¼‰ï¼Œå¯ä½¿ç”¨é¡¹ç›®çš„ Issue æ¨¡æ¿æäº¤ï¼š[![Open Issue](https://img.shields.io/badge/Open-Issue-blue)](https://github.com/bunizao/always-attend/issues/new)
- å¯é€‰å‚æ•°ï¼š`--headed` è§‚å¯Ÿæµè§ˆå™¨ã€`--dry-run` ä»…é¢„è§ˆä¸æäº¤ã€`--week N` æŒ‡å®šå‘¨æ¬¡ã€‚

6) æ›´æ–°é¡¹ç›®
```bash
git pull
```

---

å®Œæ•´ç¯å¢ƒå˜é‡åˆ—è¡¨è§ä¸‹æ–‡ï¼ˆEnvironment Variablesï¼‰ã€‚

## æ•…éšœæ’æŸ¥ï¼ˆTroubleshootingï¼‰

- å¦‚æœæ¯æ¬¡éƒ½è¦æ±‚ MFAï¼šè¯·å†æ¬¡æ‰§è¡Œæœ‰å¤´ç™»å½•ä»¥åˆ·æ–° `storage_state.json`
- å¦‚æœæµè§ˆå™¨æ— æ³•å¯åŠ¨ï¼šç¡®è®¤å·²å®‰è£… Chrome æˆ– Edgeï¼Œæˆ–è®¾ç½® `BROWSER_CHANNEL=chrome/msedge`
- Windows è‹¥æ¿€æ´»è„šæœ¬å¤±è´¥ï¼šä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShellï¼Œå†è¿è¡Œ `.venv\Scripts\Activate.ps1`
- è¿è¡Œæ—¶è¯·å‹¿ä½¿ç”¨ VPNï¼Œè¿™å¯èƒ½å¯¼è‡´ Okta æ‹’ç»è¿æ¥ã€‚
## å¸¸è§é—®é¢˜ï¼ˆWindowsï¼‰

- **`python` ä¸ `py`**ï¼šåœ¨éƒ¨åˆ† Windows ç¯å¢ƒä¸­ `python` å‘½ä»¤ä¸å¯ç”¨æˆ–æŒ‡å‘å…¶å®ƒç‰ˆæœ¬ï¼Œå¯ä½¿ç”¨ `py` ä»£æ›¿ï¼Œå¦‚ `py -m venv .venv`ã€`py main.py`ã€‚
- **åˆ‡æ¢ Git Bash ä¸ PowerShell**ï¼šåœ¨ VS Code ç­‰ç»ˆç«¯çš„ä¸‹æ‹‰èœå•ä¸­å¯é€‰æ‹© "Git Bash" æˆ– "PowerShell"ï¼›æŸäº›å‘½ä»¤ï¼ˆå¦‚ `source`ï¼‰ä»…åœ¨ Git Bash å¯ç”¨ï¼Œè€Œ PowerShell ä½¿ç”¨ `.\` è°ƒç”¨è„šæœ¬ã€‚
- **è·¯å¾„è½¬ä¹‰é—®é¢˜**ï¼šPowerShell ä½¿ç”¨åæ–œæ ï¼ˆ`\`ï¼‰ï¼Œå¯èƒ½è¢«è§†ä¸ºè½¬ä¹‰å­—ç¬¦ï¼›è¯·ä½¿ç”¨å¼•å·æˆ–åŒåæ–œæ ï¼Œå¦‚ `C:\path\to\file`ã€‚Git Bash åˆ™ä½¿ç”¨æ­£æ–œæ ï¼ˆ`/`ï¼‰ã€‚

## å‘½ä»¤è¡Œå‚æ•°ï¼ˆCommand-Line Argumentsï¼‰

main.py

| å‚æ•° | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
| --- | --- | --- | --- |
| `--browser` | string | æµè§ˆå™¨å†…æ ¸ï¼ˆ`chromium`/`firefox`/`webkit`ï¼‰ | `--browser chromium` |
| `--channel` | string | ç³»ç»Ÿæµè§ˆå™¨é€šé“ | `--channel chrome` |
| `--headed` | flag | æ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢ï¼ˆç­‰ä»·äº `HEADLESS=0`ï¼‰ | `--headed` |
| `--dry-run` | flag | ä»…è§£æå¹¶æ‰“å°ä»£ç ï¼Œä¸æäº¤ | `--dry-run` |
| `--week` | int | æäº¤ç¬¬ N å‘¨çš„ä»£ç  | `--week 4` |
| `--login-only` | flag | ä»…æ‰§è¡Œç™»å½•/åˆ·æ–°ä¼šè¯åé€€å‡º | `--login-only` |

login.py

| å‚æ•° | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
| --- | --- | --- | --- |
| `--portal` | string URL | è€ƒå‹¤é—¨æˆ·åœ°å€ï¼ˆè¦†ç›– `PORTAL_URL`ï¼‰ | `--portal https://attendance.example.edu/student/Default.aspx` |
| `--browser` | string | æµè§ˆå™¨å†…æ ¸ï¼ˆ`chromium`/`firefox`/`webkit`ï¼‰ | `--browser chromium` |
| `--channel` | string | ç³»ç»Ÿæµè§ˆå™¨é€šé“ | `--channel chrome-beta` |
| `--headed` | flag | æ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢ï¼ˆé¦–æ¬¡ç™»å½•æ¨èï¼‰ | `--headed` |
| `--storage-state` | string path | `storage_state.json` ä¿å­˜è·¯å¾„ | `--storage-state storage_state.json` |
| `--user-data-dir` | string path | æŒä¹…åŒ–æµè§ˆå™¨ç”¨æˆ·æ•°æ®ç›®å½• | `--user-data-dir ~/.always-attend-profile` |
| `--check` | flag | ä¿å­˜åå†æ¬¡æ‰“å¼€é—¨æˆ·éªŒè¯ç™»å½• | `--check` |
| `--check-only` | flag | ä»…éªŒè¯å½“å‰ä¼šè¯ï¼Œä¸æ‰“å¼€ç™»å½• | `--check-only` |

submit.py

| å‚æ•° | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
| --- | --- | --- | --- |
| `--browser` | string | æµè§ˆå™¨å†…æ ¸ï¼ˆ`chromium`/`firefox`/`webkit`ï¼‰ | `--browser chromium` |
| `--channel` | string | ç³»ç»Ÿæµè§ˆå™¨é€šé“ | `--channel msedge` |
| `--headed` | flag | æ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢ | `--headed` |
| `--dry-run` | flag | ä»…è§£æå¹¶æ‰“å°ä»£ç ï¼Œä¸æäº¤ | `--dry-run` |
| `--week` | int | æäº¤ç¬¬ N å‘¨çš„ä»£ç  | `--week 6` |

## ç¯å¢ƒå˜é‡ï¼ˆEnvironment Variablesï¼‰

| å˜é‡ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
| --- | --- | --- | --- | --- |
| `PORTAL_URL` | string URL | æ˜¯ | è€ƒå‹¤é—¨æˆ·åŸºç¡€åœ°å€ | `https://attendance.monash.edu.my` |
| `CODES_URL` | string URL | å¦ | ä»£ç  JSON çš„ç›´é“¾ | `https://example.com/codes.json` |
| `CODES_FILE` | string path | å¦ | æœ¬åœ°ä»£ç  JSON è·¯å¾„ | `/home/user/codes.json` |
| `CODES` | string | å¦ | å†…è” `slot:code;slot:code` å¯¹ | `"Workshop 1:ABCD1;Workshop 2:EFGH2"` |
| `CODES_BASE_URL` | string URL | å¦ | è‡ªåŠ¨å‘ç°çš„åŸºç¡€ URL | `https://raw.githubusercontent.com/user/repo/main` |
| `WEEK_NUMBER` | int | å¦ | è‡ªåŠ¨å‘ç°ä½¿ç”¨çš„å‘¨æ¬¡ | `4` |
| `USERNAME` | string | å¦ | Okta ç”¨æˆ·åï¼ˆè‡ªåŠ¨ç™»å½•ï¼‰ | `student@example.edu` |
| `PASSWORD` | string | å¦ | Okta å¯†ç ï¼ˆè‡ªåŠ¨ç™»å½•ï¼‰ | `correcthorsebattery` |
| `TOTP_SECRET` | stringï¼ˆbase32ï¼‰ | å¦ | MFA TOTP ç§˜é’¥ï¼ˆè‡ªåŠ¨ç™»å½•ï¼‰ | `JBSWY3DPEHPK3PXP` |
| `BROWSER` | string | å¦ | å†…æ ¸è¦†ç›–ï¼ˆ`chromium`/`firefox`/`webkit`ï¼‰ | `chromium` |
| `BROWSER_CHANNEL` | string | å¦ | ç³»ç»Ÿé€šé“ï¼ˆ`chrome`/`msedge` ç­‰ï¼‰ | `chrome` |
| `HEADLESS` | flagï¼ˆ0/1 æˆ– true/falseï¼‰ | å¦ | æ— ç•Œé¢è¿è¡Œï¼ˆ0 è¡¨ç¤ºå…³é—­ï¼‰ | `0` |

## å…è´£å£°æ˜ï¼ˆDisclaimerï¼‰

- æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ ä¸ä¸ªäººç”¨é€”ã€‚è¯·åˆç†ä½¿ç”¨ï¼Œå¹¶éµå®ˆå­¦æ ¡æ”¿ç­–ä¸ç½‘ç«™ä½¿ç”¨æ¡æ¬¾ã€‚
- æœ¬é¡¹ç›®ä¸ä»»ä½•é«˜æ ¡æˆ–æœåŠ¡æä¾›æ–¹æ— éš¶å±ã€èƒŒä¹¦æˆ–èµåŠ©å…³ç³»ã€‚æ‰€æœ‰åç§°ã€æ ‡è¯†ä¸å•†æ ‡å½’å…¶å„è‡ªæ‰€æœ‰è€…ã€‚
- æ‚¨éœ€å¯¹ä½¿ç”¨æœ¬å·¥å…·åŠäº§ç”Ÿçš„åæœè‡ªè¡Œè´Ÿè´£ã€‚ä½œè€…ä¸ä¿è¯å…¶åœ¨æ‚¨çš„ç¯å¢ƒä¸‹å¿…ç„¶å¯ç”¨ã€‚

## è®¸å¯è¯ï¼ˆLicenseï¼‰

- æœ¬é¡¹ç›®ä»¥ GNU General Public License v3.0ï¼ˆGPLâ€‘3.0ï¼‰æˆæƒï¼Œå®Œæ•´åè®®è§ä»“åº“å†… `LICENSE` æ–‡ä»¶ã€‚
- æ‚¨å¯åœ¨ GPLâ€‘3.0 æ¡æ¬¾ä¸‹å¤åˆ¶ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬è½¯ä»¶ï¼›æœ¬è½¯ä»¶æŒ‰â€œç°çŠ¶â€æä¾›ï¼Œä¸é™„å¸¦ä»»ä½•å½¢å¼çš„ä¿è¯ã€‚
